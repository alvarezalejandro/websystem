<div ng-init="setup()">
    <div layout="column" ng-cloak="" class="dataInputErrors">
        <md-content class="md-padding">
            <div>
                <div layout="row">
                    <md-input-container flex="25">
                        <md-select ng-model="formationEditing.educationType" placeholder="Tipo de Formación">
                            <md-option  value="{{educationType}}" ng-repeat="educationType in educationTypes" >
                                {{ educationType}}
                            </md-option>
                        </md-select>
                    </md-input-container>
                    <md-input-container>
                        <md-select ng-model="formationEditing.degreeArea" placeholder="Disciplina">
                            <md-option value="{{degreeArea.id}}" ng-repeat="degreeArea in parametrics['degreeArea']">
                                {{ degreeArea.name }}
                            </md-option>
                        </md-select>
                    </md-input-container>
                    <md-input-container>
                        <md-select ng-model="formationEditing.academicDegree" placeholder="Máximo título académico">
                            <md-option value="{{academicDegree.id}}" ng-repeat="academicDegree in parametrics['academicDegree']">
                                {{ academicDegree.name }}
                            </md-option>
                        </md-select>
                    </md-input-container>
                    <md-input-container flex="12">
                        <md-select ng-model="formationEditing.studiesState" placeholder="Estado">
                            <md-option ng-repeat="studiesState in studiesStates"  value="{{studiesState}}">
                                {{ studiesState }}
                            </md-option>
                        </md-select>
                    </md-input-container>
                </div>

                <div layout="row">
                    <md-input-container ng-show="formationEditing.studiesState=='En curso'">
                        <md-select  ng-model="formationEditing.scolarshipType" placeholder="Tipo de Beca">
                            <md-option ng-repeat="scolarshipType in parametrics['scolarshipType']" value="{{ scolarshipType.id }}">
                                {{ scolarshipType.name }}
                            </md-option>
                        </md-select>
                    </md-input-container>
                    <md-input-container ng-show="formationEditing.studiesState=='En curso'">
                        <md-select  ng-model="formationEditing.scolarshipName" placeholder="Nombre de Beca">
                            <md-option value="{{scolarshipName.id}}" ng-repeat="scolarshipName in parametrics['scolarshipName']">
                                {{ scolarshipName.name }}
                            </md-option>
                        </md-select>
                    </md-input-container>

                    <md-input-container ng-show="parametrics['scolarshipName'][formationEditing.scolarshipName].name=='Otro'">
                        <label>Especificar Otro</label>
                        <input name="otro" ng-model="formationEditing.otherScolarhip">
                    </md-input-container>
            </div>
                <md-button class="md-raised md-primary" ng-disabled="formationSaved || formationEditing.educationType==null || formationEditing.degreeArea==null || formationEditing.academicDegree==null ||  formationEditing.studiesState==null" ng-click="addNewFormation()">Agregar Formación</md-button>
                <label ng-show="formationSaved">Guardado!</label>
                <md-button  class="md-raised md-primary" ng-show="formationSaved">
                    <div class="button" ng-click="editNewFormation()">Agregar un Nueva Formación</div>
                </md-button>
            </div>
        </md-content>
        <div ng-cloak ng-show="researcherEditing.formations!=null">
            <md-toolbar class="md-theme-light">
                <h2 class="md-toolbar-tools">
                    <span>Formación</span>
                </h2>
            </md-toolbar>
            <md-content>
                <md-list>
                    <md-list-item class="md-3-line" ng-repeat="formation in researcherEditing.formations">
                        <div class="md-list-item-text" ng-show="formation.id != formationEditingForm.formationEditing.id">
                            <h3>{{formation.educationType}} -
                                {{parametrics['degreeArea'][formation.degreeArea].name}} -
                                {{parametrics['academicDegree'][formation.academicDegree].name}} -
                                {{formation.studiesState}}</h3>
                            <md-button  class="md-raised md-primary" ng-click="edit(formation)">Editar</md-button>
                            <md-button class="md-raised md-primary" ng-click=" deleteFormation(formation)">Eliminar</md-button>
                        </div>
                        <div  ng-show="formation.id == formationEditingForm.formationEditing.id">
                            <md-input-container>
                                <label>Tipo de Formación</label>
                                <md-select ng-model="formationEditingForm.formationEditing.educationType" placeholder="Tipo de Formación">
                                    <md-option value="{{educationType}}" ng-repeat="educationType in educationTypes" value="{{educationType}}">
                                        {{ educationType }}
                                    </md-option>
                                </md-select>
                            </md-input-container>
                            <md-input-container >
                                <label>Disciplina</label>
                                <md-select ng-model="formationEditingForm.formationEditing.degreeArea" placeholder="Disciplina">
                                    <md-option value="{{degreeArea.id}}" ng-repeat="degreeArea in  parametrics['degreeArea']">
                                        {{  degreeArea.name }}
                                    </md-option>
                                </md-select>
                            </md-input-container>
                            <md-input-container flex="">
                                <label>Máximo título académico</label>
                                <md-select ng-model="formationEditingForm.formationEditing.academicDegree" placeholder="Máximo título académico">
                                    <md-option value="{{academicDegree.id}}" ng-repeat="academicDegree in  parametrics['academicDegree']">
                                        {{  academicDegree.name }}
                                    </md-option>
                                </md-select>
                            </md-input-container>
                            <md-input-container>
                                <label>Estado</label>
                                <md-select ng-model="formationEditingForm.formationEditing.studiesState" placeholder="Estado">
                                    <md-option value="{{studiesState}}" ng-repeat="studiesState in studiesStates">
                                        {{  studiesState }}
                                    </md-option>
                                </md-select>
                            </md-input-container>
                            <div>
                                <md-button ng-click="saveEditing()" class="md-raised md-primary">Confirmar</md-button>
                                <md-button ng-click="cancelEditing()" class="md-raised md-primary">Cancelar</md-button>
                            </div>
                        </div>
                        <md-divider ng-if="!$last"></md-divider>
                    </md-list-item>
                </md-list>
            </md-content>
        </div>
    </div>
</div>